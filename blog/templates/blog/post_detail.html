{% extends 'blog/base.html' %}

{% block content %}

<div class="row">
    <div class="col-md-4 col-md-offset-4">
    </div>
</div>
<div class="post">

    <div class="my-inline-block">
        <h2 class="title-detail">{{ post.title }}</h2>
    </div>

    <div class="my-inline-block pull-right">
        {% if post.published_date %}

        <div class="date my-inline-block">
            <p>{{ post.published_date }}</p>
        </div>

        {% else %}

        <div class="my-inline-block">
            {% if user.is_authenticated and user == post.author %}

            <a class="btn btn-warning btn-raised" href="{% url 'post_publish' pk=post.pk %}">Publish</a>

            {% endif %}
        </div>

        {% endif %}

        <div class="my-inline-block">
            {% if user.is_authenticated and user == post.author %}

            <a class="btn btn-warning btn-raised" href="{% url 'post_edit' pk=post.pk %}">Edit</a>
            <a class="btn btn-warning btn-raised" href="{% url 'post_remove' pk=post.pk %}">Delete</a>

            {% endif %}

        </div>

        <div class="my-inline-block">
            {% if user.is_authenticated %}

            <a class="btn btn-warning btn-raised" href="{% url 'add_comment_to_post' pk=post.pk %}">Add Comment</a>

            {% endif %}
        </div>
    </div>

    <div class="text my-block">
        <p>{{ post.text|linebreaks }}</p>
    </div>

</div>

<hr>

{% for comment in post.comment_set.all %}
    {% if user.is_authenticated and user == post.author %}

    <div class="comment">
        <div class="comment_author">
            {{ comment.author }}

            <div class="pull-right">

                <!-- <a class="btn btn-danger btn-raised comment_button" href="">
                    <span class="glyphicon glyphicon-remove"></span>
                </a>
                <a class="btn btn-success btn-raised comment_button" href="">
                    <span class="glyphicon glyphicon-ok"></span>
                </a> -->

            </div>
        </div>

        <div class="date comment_date">

            {{ comment.created_date }}

        </div>

        <div>
            <p>{{ comment.text|linebreaks }}</p>
        </div>

    </div>

    {% endif %}
{% empty %}

    <p>No comments here yet :(</p>

{% endfor %}

{% endblock content %}
