{% extends 'blog/base.html' %}

{% block content %}
    {% if posts %}
        <div class="grid">
            {% for post in posts %}
                <div class="grid-item">
                    <div class="well">
                        <div class="post">
                            <div class="post_user">
                                <a href="#">+{{ post.author.email }}</a>
                            </div>
                            <div class="post_date">
                                <p>published: {{ post.created_date }}</p>
                            </div>
                            <div class="post_title">
                                <a class="text_adjust" href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a>
                            </div>
                            {% comment %}
                            <!-- <div class="post_text">
                                <p class="text_adjust">{{ post.text }}</p>
                            </div> -->
                            {% endcomment %}
                            <div class="post_comments">
                                <!-- <a href="{% url 'post_detail' pk=post.pk %}">Comments: {{ post.approved_comments.count }}</a> -->
                                <a href="{% url 'post_detail' pk=post.pk %}">Comments: {{ post.comment_set.count }}</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-posts">
            <h3>There are no posts!!</h3>
        </div>
    {% endif %}

    {% if user.is_authenticated %}
        <a class="btn btn-primary btn-fab btn-raised mdi-content-add btn-add-new-post" href="{% url 'post_new' %}">
            <i class="material-icons">add</i>
        </a>
    {% endif %}
{% endblock content %}
